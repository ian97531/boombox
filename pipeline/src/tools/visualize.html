<!DOCTYPE html>
<html>

<head>
	<title>Visualize</title>
	<style>
		body {
			background-color: linen;
			padding: 20px;
		}

		textarea {
			width: 100%;
			height: 100px;
			color: maroon;
		}

		.c100 {
			background-color: rgb(255, 255, 255);
		}

		.c90 {
			background-color: rgb(255, 230, 230);
		}

		.c80 {
			background-color: rgb(255, 205, 205);
		}

		.c70 {
			background-color: rgb(255, 180, 180);
		}

		.c60 {
			background-color: rgb(255, 155, 155);
		}

		.c50 {
			background-color: rgb(255, 130, 130);
		}

		.c40 {
			background-color: rgb(255, 105, 105);
		}

		.c30 {
			background-color: rgb(255, 80, 80);
		}

		.c20 {
			background-color: rgb(255, 55, 55);
		}

		.c10 {
			background-color: rgb(255, 30, 30);
		}

		.c0 {
			background-color: rgb(255, 5, 5);
		}
	</style>
	<script type="text/javascript">
		function process() {

			correctJSON = '[{"content":"I","speaker":0},{"content":"swear","speaker":0},{"content":"gray","speaker":0},{"content":"you","speaker":0},{"content":"don\'t","speaker":0},{"content":"realize","speaker":0},{"content":"how","speaker":0},{"content":"much","speaker":0},{"content":"sound","speaker":0},{"content":"there","speaker":0},{"content":"is","speaker":0},{"content":"in","speaker":0},{"content":"the","speaker":0},{"content":"world","speaker":0},{"content":"until","speaker":0},{"content":"you","speaker":0},{"content":"come","speaker":0},{"content":"to","speaker":0},{"content":"record","speaker":0},{"content":"a","speaker":0},{"content":"podcast","speaker":0},{"content":"Oh","speaker":1},{"content":"i","speaker":1},{"content":"do","speaker":1},{"content":"I","speaker":1},{"content":"do","speaker":1},{"content":"Brady","speaker":1},{"content":"what","speaker":1},{"content":"you","speaker":1},{"content":"think","speaker":1},{"content":"of","speaker":1},{"content":"as","speaker":1},{"content":"a","speaker":1},{"content":"quiet","speaker":1},{"content":"isolated","speaker":1},{"content":"room","speaker":1},{"content":"that","speaker":1},{"content":"you\'re","speaker":1},{"content":"in","speaker":1},{"content":"Turns","speaker":1},{"content":"out","speaker":1},{"content":"it\'s","speaker":1},{"content":"not","speaker":1},{"content":"the","speaker":1},{"content":"moment","speaker":1},{"content":"There\'s","speaker":1},{"content":"a","speaker":1},{"content":"microphone","speaker":1},{"content":"live","speaker":1},{"content":"in","speaker":1},{"content":"it","speaker":1},{"content":"Obviously","speaker":0},{"content":"it\'s","speaker":0},{"content":"like","speaker":0},{"content":"that","speaker":0},{"content":"all","speaker":0},{"content":"the","speaker":0},{"content":"time","speaker":0},{"content":"isn\'t","speaker":0},{"content":"and","speaker":0},{"content":"you","speaker":0},{"content":"just","speaker":0},{"content":"notice","speaker":0},{"content":"that","speaker":0},{"content":"when","speaker":0},{"content":"it","speaker":0},{"content":"matters","speaker":0},{"content":"i\'m","speaker":0},{"content":"presuming","speaker":0},{"content":"like","speaker":0},{"content":"the","speaker":0},{"content":"world\'s","speaker":0},{"content":"not","speaker":0},{"content":"conspiring","speaker":0},{"content":"against","speaker":0},{"content":"hello","speaker":0},{"content":"internet","speaker":0},{"content":"hello","speaker":1},{"content":"internet","speaker":1},{"content":"affects","speaker":1},{"content":"the","speaker":1},{"content":"world","speaker":1},{"content":"Perhaps","speaker":1},{"content":"the","speaker":1},{"content":"world","speaker":1},{"content":"also","speaker":1},{"content":"tries","speaker":1},{"content":"to","speaker":1},{"content":"affect","speaker":1},{"content":"hello","speaker":1},{"content":"internet","speaker":1},{"content":"so","speaker":0},{"content":"while","speaker":0},{"content":"back","speaker":0},{"content":"what","speaker":0},{"content":"episode","speaker":0},{"content":"number","speaker":0},{"content":"was","speaker":0},{"content":"it","speaker":0},{"content":"was","speaker":0},{"content":"episode","speaker":0},{"content":"number","speaker":0},{"content":"ninety","speaker":0},{"content":"five","speaker":0},{"content":"called","speaker":0},{"content":"break","speaker":0},{"content":"glass","speaker":0},{"content":"in","speaker":0},{"content":"case","speaker":0},{"content":"of","speaker":0},{"content":"emergency","speaker":0},{"content":"when","speaker":0},{"content":"we","speaker":0},{"content":"broke","speaker":0},{"content":"the","speaker":0},{"content":"glass","speaker":0},{"content":"in","speaker":0},{"content":"case","speaker":0},{"content":"of","speaker":0},{"content":"an","speaker":0},{"content":"emergency","speaker":0},{"content":"And","speaker":0},{"content":"i","speaker":0},{"content":"got","speaker":0},{"content":"a","speaker":0},{"content":"book","speaker":0},{"content":"called","speaker":0},{"content":"the","speaker":0},{"content":"book","speaker":0},{"content":"of","speaker":0},{"content":"thanks","speaker":0},{"content":"which","speaker":0},{"content":"is","speaker":0},{"content":"a","speaker":0},{"content":"book","speaker":0},{"content":"that\'s","speaker":0},{"content":"just","speaker":0},{"content":"full","speaker":0},{"content":"of","speaker":0},{"content":"thought","speaker":0},{"content":"provoking","speaker":0},{"content":"questions","speaker":0},{"content":"by","speaker":0},{"content":"a","speaker":0},{"content":"chap","speaker":0},{"content":"named","speaker":0},{"content":"in","speaker":0},{"content":"gilbert","speaker":0},{"content":"And","speaker":0},{"content":"we","speaker":0},{"content":"just","speaker":0},{"content":"leave","speaker":0},{"content":"through","speaker":0},{"content":"the","speaker":0},{"content":"pages","speaker":0},{"content":"and","speaker":0},{"content":"i","speaker":0},{"content":"asked","speaker":0},{"content":"you","speaker":0},{"content":"some","speaker":0},{"content":"of","speaker":0},{"content":"the","speaker":0},{"content":"questions","speaker":0},{"content":"and","speaker":0},{"content":"then","speaker":0},{"content":"we","speaker":0},{"content":"discuss","speaker":0},{"content":"them","speaker":0},{"content":"Do","speaker":0},{"content":"you","speaker":0},{"content":"remember","speaker":0},{"content":"this","speaker":0},{"content":"I","speaker":1},{"content":"remember","speaker":1},{"content":"that","speaker":1},{"content":"we","speaker":1},{"content":"did","speaker":1},{"content":"it","speaker":1},{"content":"remember","speaker":1},{"content":"almost","speaker":1},{"content":"nothing","speaker":1},{"content":"from","speaker":1},{"content":"that","speaker":1},{"content":"episode","speaker":1},{"content":"Like","speaker":1},{"content":"i","speaker":1},{"content":"can\'t","speaker":1},{"content":"remember","speaker":1},{"content":"any","speaker":1},{"content":"of","speaker":1},{"content":"the","speaker":1},{"content":"questions","speaker":1},{"content":"now","speaker":0},{"content":"i\'m","speaker":0},{"content":"really","speaker":0},{"content":"worried","speaker":0},{"content":"about","speaker":0},{"content":"you","speaker":0},{"content":"plicating","speaker":0},{"content":"things","speaker":0},{"content":"too","speaker":0},{"content":"so","speaker":0},{"content":"that\'s","speaker":0},{"content":"not","speaker":0},{"content":"going","speaker":0},{"content":"to","speaker":0},{"content":"help","speaker":0},{"content":"So","speaker":1},{"content":"what","speaker":1},{"content":"you\'re","speaker":1},{"content":"saying","speaker":1},{"content":"brady","speaker":1},{"content":"is","speaker":1},{"content":"the","speaker":1},{"content":"book","speaker":1},{"content":"of","speaker":1},{"content":"thanks","speaker":1},{"content":"is","speaker":1},{"content":"back","speaker":1},{"content":"A","speaker":0},{"content":"lot","speaker":0},{"content":"of","speaker":0},{"content":"people","speaker":0},{"content":"wanted","speaker":0},{"content":"us","speaker":0},{"content":"to","speaker":0},{"content":"do","speaker":0},{"content":"more","speaker":0},{"content":"of","speaker":0},{"content":"these","speaker":0},{"content":"questions","speaker":0},{"content":"We","speaker":0},{"content":"only","speaker":0},{"content":"got","speaker":0},{"content":"about","speaker":0},{"content":"halfway","speaker":0},{"content":"through","speaker":0},{"content":"the","speaker":0},{"content":"book","speaker":0},{"content":"I\'m","speaker":0},{"content":"not","speaker":0},{"content":"doing","speaker":0},{"content":"all","speaker":0},{"content":"the","speaker":0},{"content":"questions","speaker":0},{"content":"i\'m","speaker":0},{"content":"just","speaker":0},{"content":"doing","speaker":0},{"content":"once","speaker":0},{"content":"that","speaker":0},{"content":"i","speaker":0},{"content":"thought","speaker":0},{"content":"were","speaker":0},{"content":"interesting","speaker":0},{"content":"and","speaker":0},{"content":"i","speaker":0},{"content":"got","speaker":0},{"content":"about","speaker":0},{"content":"halfway","speaker":0},{"content":"through","speaker":0},{"content":"the","speaker":0},{"content":"list","speaker":0},{"content":"of","speaker":0},{"content":"ones","speaker":0},{"content":"that","speaker":0},{"content":"i","speaker":0},{"content":"thought","speaker":0},{"content":"were","speaker":0},{"content":"interesting","speaker":0},{"content":"and","speaker":0},{"content":"people","speaker":0},{"content":"said","speaker":0},{"content":"well","speaker":0},{"content":"you","speaker":0},{"content":"should","speaker":0},{"content":"do","speaker":0},{"content":"some","speaker":0},{"content":"more","speaker":0},{"content":"i","speaker":0},{"content":"really","speaker":0},{"content":"enjoyed","speaker":0},{"content":"that","speaker":0},{"content":"so","speaker":0},{"content":"thought","speaker":0},{"content":"maybe","speaker":0},{"content":"we","speaker":0},{"content":"should","speaker":0},{"content":"do","speaker":0},{"content":"some","speaker":0},{"content":"more","speaker":0},{"content":"also","speaker":1},{"content":"think","speaker":1},{"content":"this","speaker":1},{"content":"is","speaker":1},{"content":"a","speaker":1},{"content":"good","speaker":1},{"content":"episode","speaker":1},{"content":"for","speaker":1},{"content":"listeners","speaker":1},{"content":"at","speaker":1},{"content":"home","speaker":1},{"content":"to","speaker":1},{"content":"participate","speaker":1},{"content":"in","speaker":1},{"content":"brady","speaker":1},{"content":"Ask","speaker":1},{"content":"the","speaker":1},{"content":"question","speaker":1},{"content":"if","speaker":1},{"content":"you\'re","speaker":1},{"content":"in","speaker":1},{"content":"say","speaker":1},{"content":"a","speaker":1},{"content":"hello","speaker":1},{"content":"internet","speaker":1},{"content":"listening","speaker":1},{"content":"party","speaker":1},{"content":"as","speaker":1},{"content":"i","speaker":1},{"content":"just","speaker":1},{"content":"presume","speaker":1},{"content":"many","speaker":1},{"content":"of","speaker":1},{"content":"you","speaker":1},{"content":"are","speaker":1},{"content":"every","speaker":1},{"content":"time","speaker":1},{"content":"an","speaker":1},{"content":"episode","speaker":1},{"content":"comes","speaker":1},{"content":"out","speaker":1},{"content":"you","speaker":1},{"content":"know","speaker":1},{"content":"pause","speaker":1},{"content":"the","speaker":1},{"content":"show","speaker":1},{"content":"get","speaker":1},{"content":"a","speaker":1},{"content":"good","speaker":1},{"content":"conversation","speaker":1},{"content":"going","speaker":1},{"content":"with","speaker":1},{"content":"your","speaker":1},{"content":"hello","speaker":1},{"content":"internet","speaker":1},{"content":"listening","speaker":1},{"content":"party","speaker":1},{"content":"partners","speaker":1},{"content":"perhaps","speaker":1},{"content":"it","speaker":1},{"content":"a","speaker":1},{"content":"pony","speaker":1},{"content":"party","speaker":1},{"content":"and","speaker":1},{"content":"see","speaker":1},{"content":"what","speaker":1},{"content":"do","speaker":1},{"content":"you","speaker":1},{"content":"think","speaker":1},{"content":"before","speaker":1},{"content":"hearing","speaker":1},{"content":"what","speaker":1},{"content":"breeding","speaker":1},{"content":"i","speaker":1},{"content":"think","speaker":1},{"content":"yeah","speaker":0},{"content":"put","speaker":0},{"content":"down","speaker":0},{"content":"the","speaker":0},{"content":"paintbrush","speaker":0},{"content":"is","speaker":0},{"content":"for","speaker":0},{"content":"just","speaker":0},{"content":"a","speaker":0},{"content":"minute","speaker":0},{"content":"and","speaker":0},{"content":"mull","speaker":0},{"content":"over","speaker":0},{"content":"that","speaker":0},{"content":"question","speaker":0},{"content":"while","speaker":0},{"content":"the","speaker":0},{"content":"ahs","speaker":0},{"content":"a","speaker":0},{"content":"little","speaker":0},{"content":"bit","speaker":0},{"content":"of","speaker":0},{"content":"hay","speaker":0},{"content":"and","speaker":0},{"content":"a","speaker":0},{"content":"drink","speaker":0},{"content":"of","speaker":0},{"content":"water","speaker":0},{"content":"yeah","speaker":1},{"content":"give","speaker":1},{"content":"that","speaker":1},{"content":"poor","speaker":1},{"content":"pony","speaker":1},{"content":"a","speaker":1},{"content":"break","speaker":1},{"content":"Do","speaker":0},{"content":"you","speaker":0},{"content":"know","speaker":0},{"content":"what","speaker":0},{"content":"before","speaker":0},{"content":"the","speaker":0},{"content":"last","speaker":0},{"content":"episode","speaker":0},{"content":"you","speaker":0},{"content":"like","speaker":0},{"content":"retroactively","speaker":0},{"content":"recorded","speaker":0},{"content":"a","speaker":0},{"content":"message","speaker":0},{"content":"for","speaker":0},{"content":"the","speaker":0},{"content":"listeners","speaker":0},{"content":"with","speaker":0},{"content":"that","speaker":0},{"content":"same","speaker":0},{"content":"idea","speaker":0},{"content":"Make","speaker":0},{"content":"sure","speaker":0},{"content":"your","speaker":0},{"content":"pores","speaker":0},{"content":"and","speaker":0},{"content":"discuss","speaker":0},{"content":"it","speaker":0},{"content":"with","speaker":0},{"content":"your","speaker":0},{"content":"friends","speaker":0},{"content":"and","speaker":0},{"content":"things","speaker":0},{"content":"like","speaker":0},{"content":"that","speaker":0},{"content":"And","speaker":0},{"content":"i","speaker":0},{"content":"thought","speaker":0},{"content":"well","speaker":0},{"content":"that\'s","speaker":0},{"content":"a","speaker":0},{"content":"good","speaker":0},{"content":"suggestion","speaker":0},{"content":"by","speaker":0},{"content":"gray","speaker":0},{"content":"But","speaker":0},{"content":"then","speaker":0},{"content":"when","speaker":0},{"content":"i","speaker":0},{"content":"listen","speaker":0},{"content":"to","speaker":0},{"content":"the","speaker":0},{"content":"episode","speaker":0},{"content":"like","speaker":0},{"content":"before","speaker":0},{"content":"i","speaker":0},{"content":"even","speaker":0},{"content":"finish","speaker":0},{"content":"some","speaker":0},{"content":"of","speaker":0},{"content":"the","speaker":0},{"content":"questions","speaker":0},{"content":"you","speaker":0},{"content":"just","speaker":0},{"content":"blow","speaker":0},{"content":"it","speaker":0},{"content":"out","speaker":0},{"content":"your","speaker":0},{"content":"answer","speaker":0},{"content":"like","speaker":0},{"content":"no","speaker":0},{"content":"that\'s","speaker":0},{"content":"all","speaker":0},{"content":"wrong","speaker":0},{"content":"and","speaker":0},{"content":"so","speaker":0},{"content":"you","speaker":0},{"content":"need","speaker":0},{"content":"to","speaker":0},{"content":"answer","speaker":0},{"content":"the","speaker":0},{"content":"questions","speaker":0},{"content":"more","speaker":0},{"content":"gently","speaker":0},{"content":"now","speaker":0},{"content":"to","speaker":0},{"content":"give","speaker":0},{"content":"people","speaker":0},{"content":"time","speaker":0},{"content":"to","speaker":0},{"content":"pause","speaker":0},{"content":"and","speaker":0},{"content":"have","speaker":0},{"content":"a","speaker":0},{"content":"mall","speaker":0},{"content":"What","speaker":1},{"content":"had","speaker":1},{"content":"happened","speaker":1},{"content":"in","speaker":1},{"content":"that","speaker":1},{"content":"recording","speaker":1},{"content":"is","speaker":1},{"content":"it","speaker":1},{"content":"didn\'t","speaker":1},{"content":"occur","speaker":1},{"content":"to","speaker":1},{"content":"me","speaker":1},{"content":"until","speaker":1},{"content":"after","speaker":1},{"content":"during","speaker":1},{"content":"the","speaker":1},{"content":"editing","speaker":1},{"content":"process","speaker":1},{"content":"that","speaker":1},{"content":"it","speaker":1},{"content":"would","speaker":1},{"content":"be","speaker":1},{"content":"a","speaker":1},{"content":"good","speaker":1},{"content":"idea","speaker":1},{"content":"too","speaker":1},{"content":"maybe","speaker":1},{"content":"have","speaker":1},{"content":"the","speaker":1},{"content":"whole","speaker":1},{"content":"question","speaker":1},{"content":"read","speaker":1},{"content":"before","speaker":1},{"content":"it\'s","speaker":1},{"content":"rejecting","speaker":1},{"content":"that","speaker":1},{"content":"people","speaker":1},{"content":"might","speaker":1},{"content":"want","speaker":1},{"content":"to","speaker":1},{"content":"answer","speaker":1},{"content":"before","speaker":1},{"content":"i","speaker":1},{"content":"blurt","speaker":1},{"content":"something","speaker":1},{"content":"out","speaker":1},{"content":"So","speaker":1},{"content":"yeah","speaker":1},{"content":"that\'s","speaker":1},{"content":"why","speaker":1},{"content":"i\'m","speaker":1},{"content":"saying","speaker":1},{"content":"this","speaker":1},{"content":"for","speaker":1},{"content":"the","speaker":1},{"content":"listeners","speaker":1},{"content":"benefit","speaker":1},{"content":"but","speaker":1},{"content":"also","speaker":1},{"content":"partly","speaker":1},{"content":"for","speaker":1},{"content":"my","speaker":1},{"content":"benefit","speaker":1},{"content":"to","speaker":1},{"content":"remind","speaker":1},{"content":"me","speaker":1},{"content":"because","speaker":1},{"content":"i\'m","speaker":1},{"content":"probably","speaker":1},{"content":"blurted","speaker":1},{"content":"things","speaker":1},{"content":"out","speaker":1},{"content":"because","speaker":1},{"content":"questions","speaker":1},{"content":"were","speaker":1},{"content":"infuriating","speaker":1},{"content":"or","speaker":1},{"content":"poorly","speaker":1},{"content":"formed","speaker":1},{"content":"That\'s","speaker":1},{"content":"my","speaker":1},{"content":"guess","speaker":1},{"content":"that\'s","speaker":1},{"content":"probably","speaker":1},{"content":"what","speaker":1},{"content":"i","speaker":1},{"content":"would\'ve","speaker":1},{"content":"interjected","speaker":1},{"content":"Well","speaker":0},{"content":"the","speaker":0},{"content":"funny","speaker":0},{"content":"thing","speaker":0},{"content":"was","speaker":0},{"content":"i","speaker":0},{"content":"actually","speaker":0},{"content":"i","speaker":0},{"content":"committed","speaker":0},{"content":"a","speaker":0},{"content":"lot","speaker":0},{"content":"of","speaker":0},{"content":"the","speaker":0},{"content":"questions","speaker":0},{"content":"i","speaker":0},{"content":"thought","speaker":0},{"content":"would","speaker":0}]'
			correct = JSON.parse(correctJSON)
			outputEl = document.getElementById('output');
			textData = document.getElementById('input').value;
			speakers = [
				document.getElementById('speaker1').value,
				document.getElementById('speaker2').value
			];
			jsonData = JSON.parse(textData);
			lines = []
			currentSpeaker = undefined
			currentLine = ''
			words = []
			index = 0
			matching = 0

			jsonData.forEach(function (word) {
				// if (word.speaker === correct[index].speaker) {
				// 	matching += 1
				// }

				if (word.speaker !== currentSpeaker) {
					currentSpeaker = word.speaker;
					currentLine += words.join(' ') + '</div>';
					lines.push(currentLine)
					if (currentSpeaker === 0 || currentSpeaker === 1) {
						speaker = speakers[currentSpeaker]
					} else {
						speaker = 'Speaker ' + (currentSpeaker + 1)
					}
					currentLine = '<h3>' + speaker + '</h3>';
					currentLine += '<div class="line">'
					words = [];
				}


				wordStuff = word.content
				if (word.originalWord.speaker !== word.candidateWords[0].speaker) {
					color = '#D5F5E3'
					if (word.speaker === word.originalWord.speaker) {
						color = '#AED6F1'
					}
					wordStuff = `<b style="text-decoration: underline; background-color: ${color}">${wordStuff}</b>`
				}

				confidence = JSON.stringify(word, null, 2).replace(/"/gi, '\'')

				words.push('<span title="' + confidence + '">' + wordStuff + '</span>')
				index += 1
			});
			alert(`Score: ${matching / jsonData.length * 100}%`)

			outputEl.innerHTML = lines.join('');
		}

	</script>
</head>

<body>
	<div>
		<h4>Paste the normalized json into this text area:</h4>
		<textarea id="input"></textarea>
	</div>
	<div>
		<h4>Speaker 1:
			<input type="text" value="Speaker 1" id="speaker1" />
		</h4>

	</div>
	<div>
		<h4>Speaker 2:
			<input type="text" value="Speaker 2" id="speaker2" />
		</h4>

	</div>
	<div>
		<input onClick="process()" value="Visualize" type="button"></input>
	</div>
	<hr>
	<div>
		Hover over the word to see that word's transcription confidence score. The more red the highlighting of a word, the
		lower
		the confidence score.
	</div>
	<div id="output"></div>
</body>

</html>